<h1><strong>Internet‑Draft: The SymPoint File Format</strong></h1><p></p><h3><em>A Programmable Symbolic Mapping Specification</em></h3><h1><strong>Abstract</strong></h1><p></p><p>This document specifies <strong>SymPoint</strong>, a text‑based, declarative file format for defining programmable symbolic mappings, including prefix variables, named symbolic links, and path‑rewrite rules. SymPoint files (<code>.smpnt</code>) enable portable, user‑level filesystem overlays without requiring elevated privileges. The format supports both local filesystem paths and remote URL‑based resources, enabling hybrid virtual directory structures.</p><p></p><h1><strong>Table of Contents</strong></h1><p></p><ol><li><p>Abstract</p><p></p></li><li><p>Terminology</p><p></p></li><li><p>Overview</p><p></p></li><li><p>File Structure</p><p></p></li><li><p>Prefix Declarations</p><p></p></li><li><p>Link Declarations</p><p></p></li><li><p>Rewrite Rules</p><p></p></li><li><p>Variable Expansion</p><p></p></li><li><p>Processing Model</p><p></p></li><li><p>Error Handling</p><p></p></li><li><p>Security Considerations</p><p></p></li><li><p>IANA Considerations</p><p></p></li><li><p>Example SymPoint File</p><p></p></li><li><p>Acknowledgments</p><p></p></li></ol><p></p><h1><strong>1. Terminology</strong></h1><p></p><p><strong>SymPoint File</strong> <br>A UTF‑8 text file ending in <code>.smpnt</code> containing symbolic mapping declarations.</p><p></p><p><strong>Prefix</strong> <br>A named variable whose value is a filesystem path or URL. Prefixes expand to <code>$PREFIX_NAME</code>.</p><p></p><p><strong>Link</strong> <br>A named symbolic reference to a file path or URL, optionally using prefixes.</p><p></p><p><strong>Rewrite Rule</strong> <br>A directive mapping one directory path to another path or URL.</p><p></p><p><strong>Processor</strong> <br>Any software component capable of parsing and applying SymPoint mappings.</p><p></p><p><strong>MUST / MUST NOT / SHOULD / MAY</strong> <br>These terms are to be interpreted as described in RFC 2119.</p><p></p><h1><strong>2. Overview</strong></h1><p></p><p>SymPoint provides a structured mechanism for defining:</p><p></p><ul><li><p>Virtual filesystem roots</p><p></p></li><li><p>Named symbolic references</p><p></p></li><li><p>Directory‑level path redirection</p><p></p></li><li><p>URL‑based resource mounts</p><p></p></li></ul><p></p><p>Unlike traditional symbolic links, SymPoint supports:</p><p></p><ul><li><p>Multiple mappings in a single file</p><p></p></li><li><p>URL targets</p><p></p></li><li><p>Scoped variable expansion</p><p></p></li><li><p>Non‑privileged overlays</p><p></p></li></ul><p></p><p>SymPoint is intended for:</p><p></p><ul><li><p>Portable development environments</p><p></p></li><li><p>Cross‑platform path normalization</p><p></p></li><li><p>Virtualized resource trees</p><p></p></li><li><p>Declarative configuration of filesystem overlays</p><p></p></li></ul><p></p><h1><strong>3. File Structure</strong></h1><p></p><p>A SymPoint file consists of:</p><p></p><ol><li><p>A mandatory header</p><p></p></li><li><p>Zero or more prefix declarations</p><p></p></li><li><p>Zero or more link declarations</p><p></p></li><li><p>Zero or more rewrite rules</p><p></p></li></ol><p></p><p>Blank lines are permitted. Comments begin with <code>#</code>.</p><p></p><h3><strong>3.1 Header</strong></h3><p></p><p>The first non‑empty, non‑comment line MUST be:</p><p></p><p>Code</p><pre><code class="language-auto">[SymPoint]
</code></pre><p>If absent, the file MUST be rejected.</p><p></p><h1><strong>4. Prefix Declarations</strong></h1><p></p><h3><strong>4.1 Syntax</strong></h3><p></p><p>Code</p><pre><code>prefix PREFIX_NAME='VALUE'
</code></pre><h3><strong>4.2 Constraints</strong></h3><p></p><ul><li><p><code>PREFIX_NAME</code> MUST use the charset:<br><code>QWERTYUIOPASDFGHJKLZXCVBNM_</code></p><p></p></li><li><p><code>VALUE</code> MUST be:</p><p></p><ul><li><p>An absolute filesystem path, or</p><p></p></li><li><p>A URL ending in <code>/</code></p><p></p></li></ul><p></p></li></ul><p></p><h3><strong>4.3 Semantics</strong></h3><p></p><ul><li><p>Prefixes expand to <code>$PREFIX_NAME</code>.</p><p></p></li><li><p>Prefixes MUST be declared before use.</p><p></p></li><li><p>Prefix values SHOULD end with <code>/</code> unless referring to a file.</p><p></p></li></ul><p></p><h1><strong>5. Link Declarations</strong></h1><p></p><h3><strong>5.1 Syntax</strong></h3><p></p><p>Code</p><pre><code>link LINK_NAME='TARGET'
</code></pre><h3><strong>5.2 Constraints</strong></h3><p></p><ul><li><p><code>LINK_NAME</code> uses the same charset as prefixes.</p><p></p></li><li><p><code>TARGET</code> MAY contain:</p><p></p><ul><li><p>Literal paths</p><p></p></li><li><p><code>$PREFIX</code> references</p><p></p></li><li><p>Relative paths</p><p></p></li></ul><p></p></li></ul><p></p><h3><strong>5.3 Semantics</strong></h3><p></p><ul><li><p>Links MUST resolve to a file, not a directory.</p><p></p></li><li><p>Links MUST be expanded after prefix expansion.</p><p></p></li></ul><p></p><h1><strong>6. Rewrite Rules</strong></h1><p></p><h3><strong>6.1 Syntax</strong></h3><p></p><p>Code</p><pre><code>/path/to/intercept/\= 'VALUE'
</code></pre><h3><strong>6.2 Constraints</strong></h3><p></p><ul><li><p>Left side MUST begin and end with <code>/</code>.</p><p></p></li><li><p>Left side MUST represent a directory path.</p><p></p></li><li><p>Right side MUST use the charset:<br><code>QWERTYUIOPASDFGHJKLZXCVBNM_-+={}[]()|\/.,qwertyuiopasdfghjklzxcvbnm</code></p><p></p></li></ul><p></p><h3><strong>6.3 Semantics</strong></h3><p></p><ul><li><p>Rewrite rules intercept filesystem accesses.</p><p></p></li><li><p>If multiple rules match, the longest path wins.</p><p></p></li><li><p>Rewrite rules MUST NOT create cycles.</p><p></p></li></ul><p></p><h1><strong>7. Variable Expansion</strong></h1><p></p><h3><strong>7.1 Expansion Order</strong></h3><p></p><ol><li><p>Prefix expansion</p><p></p></li><li><p>Link resolution</p><p></p></li><li><p>Rewrite rule application</p><p></p></li></ol><p></p><h3><strong>7.2 Invalid References</strong></h3><p></p><p>Referencing an undeclared prefix MUST cause the file to be rejected.</p><p></p><h1><strong>8. Processing Model</strong></h1><p></p><p>When resolving a path:</p><p></p><h3><strong>8.1 Named Link Resolution</strong></h3><p></p><ol><li><p>Retrieve link target</p><p></p></li><li><p>Expand prefixes</p><p></p></li><li><p>Normalize path or URL</p><p></p></li></ol><p></p><h3><strong>8.2 Filesystem Path Resolution</strong></h3><p></p><ol><li><p>Identify matching rewrite rule</p><p></p></li><li><p>Apply longest‑match rule</p><p></p></li><li><p>Expand prefixes</p><p></p></li><li><p>Normalize result</p><p></p></li></ol><p></p><h3><strong>8.3 URL Handling</strong></h3><p></p><p>URLs MUST NOT be normalized beyond removing redundant slashes.</p><p></p><h1><strong>9. Error Handling</strong></h1><p></p><p>A processor MUST reject the file if:</p><p></p><ul><li><p>Header is missing</p><p></p></li><li><p>Prefix or link names violate charset rules</p><p></p></li><li><p>Quotes are unbalanced</p><p></p></li><li><p>A prefix is referenced before declaration</p><p></p></li><li><p>A link resolves to a directory</p><p></p></li><li><p>A rewrite rule is malformed</p><p></p></li><li><p>A rewrite rule creates a cycle</p><p></p></li></ul><p></p><h1><strong>10. Security Considerations</strong></h1><p></p><ul><li><p>Implementations MUST sandbox URL access unless explicitly permitted.</p><p></p></li><li><p>Implementations MUST prevent mappings from escaping chroot or container boundaries.</p><p></p></li><li><p>Implementations MUST NOT allow SymPoint files to override system‑critical directories without elevated privileges.</p><p></p></li><li><p>Implementations SHOULD validate URLs to prevent SSRF‑like behavior.</p><p></p></li></ul><p></p><h1><strong>11. IANA Considerations</strong></h1><p></p><p>IANA is requested to register the following:</p><p></p><h3><strong>11.1 MIME Type Registration</strong></h3><p></p><p><strong>Type name:</strong> application<br><strong>Subtype name:</strong> x-sympoint<br><strong>File extension:</strong> .smpnt<br><strong>Encoding:</strong> UTF‑8<br><strong>Security considerations:</strong> See Section 10<br><strong>Published specification:</strong> This document</p><p></p><h3><strong>11.2 Media Type Usage</strong></h3><p></p><p>The <code>application/x-sympoint</code> media type is intended for declarative symbolic mapping files.</p><p></p><h1><strong>12. Example SymPoint File</strong></h1><p></p><p>Code</p><pre><code class="language-auto">[SymPoint]

# Prefixes
prefix WEB='https://cdn.example.com/project/'
prefix LOCAL='/home/rudra/dev/'

# Links
link MAINCSS='$WEB/styles/main.css'
link SETTINGS='$LOCAL/config/settings.json'

# Rewrite Rules
/usr/share/icons/\= '$WEB/icons/'
/etc/myapp/config/\= '$LOCAL/config/'
</code></pre><h1><strong>13. Acknowledgments</strong></h1><p></p><p>This specification is based on the original concept and design ideas created by <strong>Rudra</strong>, whose clarity, creativity, and systems‑level thinking inspired the development of SymPoint as a formalized, standards‑grade technology.</p><hr><hr><hr><hr><hr><p></p>